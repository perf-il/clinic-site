# Сайт компании медицинской диагностики
### Многостраничный сайт клиники медицинской диагностики с возможностью оформлять заказы в личном кабинете пользователя

--------------------------


Сайт написан с помощью фреймворка Django v4.2.5 с применением следующего стека:
<style>
   .stack {
      border: 1px solid black;
      border-radius: 12px;
      padding: 5px 8px;
      font-color: white;
      text-align: center;
      margin: 5px;
   }
</style>

<span class="stack" style="background: #FF6633;">PostgresSQL</span> 
<span class="stack" style="background: #6633FF;">Django</span> 
<span class="stack" style="background: #3333CC;">Templates</span> 
<span class="stack" style="background: #006666;">Forms</span> 
<span class="stack" style="background: #CC0066;">Auth</span> 
<span class="stack" style="background: #666666;">Git</span> 
<span class="stack" style="background: #660000;">ORM</span> 


------------------------

## Приложения

1. users - приложение для реализации логики работы с пользователями сайта. Позволяет создавать, редактировать и удалять пользователей сайта и разграничивать права доступа для различных категорий


2. clinic - приложение для работы с моделями и расписаниями сайта. Реализует базовую логику взаимодействия между всеми моделями проекта
------------------------------------
## Модели и поля


1. **users.User** - модель для работы с пользователем сайта (наследуется от AbstractUser)
    - username (*None*)
    - email - поле для ввода e-mail (переопределяется для *USERNAME_FIELD*)
    - phone - поле для ввода телефона (*необязательное*)
    - is_active - маркер для активированных пользователей (*default: false*)
2. **clinic.Direction** - модель для работы с категориями услуг
    - title - название категории
    - preview - поле для добавления картинки (*необязательное*)
3. **clinic.Service** - модель для работы с услугами
    - direction - внешний ключ к модели **clinic.Direction**
    - title - название услуги
    - description - описание услуги (*необязательное*)
    - price - стоимость услуги без скидки
    - preview - поле для добавления картинки (*необязательное*)
    - discount - размер скидки, может быть от 0 до 1, где 0 - скидка 100%, а 1 - товар без скидки (*default: 1*)
4. **clinic.Doctor** - модель для работы с врачами
    - name - имя врача
    - direction - внешний ключ к модели **clinic.Direction**
    - description - поле для описания деятельности врача (*необязательное*)
5. **clinic.Schedule** - модель для работы с расписанием (*врач работает весь день, но не каждый день*)
    - day - день недели, (*0 - Понедельник, 6 - Воскресенье*)
    - doctor - внешний ключ к модели **clinic.Doctor** (*ManyToManyField*)
6. **clinic.Order** - модель для работы с заказами
    - user - внешний ключ к модели 
    - doctor - внешний ключ к модели **users.User** 
    - service - внешний ключ к модели **clinic.Service** 
    - data - дата оказания услуги
    - time - время оказания услуги
    - data_created - дата и время создания заказа (*default: now*)
    - status - статус заказа, ('IW'-'Waiting', 'CL'-'Closed', 'CN'-'Canceled' default: *default: 'IW'*)
    - price - стоимость заказа с учетом скидки
------------------------------------   
## Регистрация нового пользователя

Для доступа в личный кабинет и возможности создания и управления заказами, новому пользователю необходимо пройти процедуру регистрацию.

### Инструкция по регистрации:
 
- перейти по ссылке "Регистрация" в правом верхнем углу главного меню или на странице входа
- ввести действующий e-mail и придумать пароль (не менее 8 символов, минимум одна буква и цифра)
- перейти по ссылке, которая придет на указанную почту
- ввести свой e-mail и пароль на странице входа на сайт

После успешного прохождения регистрации и входа на сайт, в правом верхнем углу главного меню появится ссылка для перехода в личный кабинет `Личный кабинет: adres@email.com`

------------------------------------ 
## Работа с личным кабинетом

В личном кабинете пользователя будет отображаться информация о пользователе, введенная при регистрации и его заказы. 
Заказы в личном кабинете разбиты на 3 категории - текущие, завершенные и отмененные, а так же отсортированы по дате и времени записи

### В личном кабинете пользователь может:
 
- отредактировать личную информацию 
- создать новый заказ
- изменить уже созданный заказ
- отменить созданный заказ

**После любого действия с заказом в личном кабинете, на почту пользователя автоматически будет отправлено сообщение с информацией о внесенных изменениях - создании, изменении или отмене заказа**

------------------------------------ 
## Валидации
На сайте предусмотрены валидации прав доступа пользователей, а так же валидация вводимой информации при создании нового заказа.

### Валидация прав доступа пользователя:
 
- ***неавторизованный*** пользователь **может** просматривать все страницы сайта, кроме личного кабинета 
- ***неавторизованный*** пользователь **не может** создавать новые заказы или редактировать\удалять существующие
- ***авторизованный*** пользователь **может** просматривать все страницы, заходить в свой личный кабинет, создавать, редактировать и отменять свои заказы
- ***авторизованный*** пользователь **не может** заходить в чужой личный кабинет, а так же просматривать, редактировать и отменять чужие заказы
- только ***суперпользователь*** **может** заходить в административную часть сайта и управлять всеми моделями и пользователями

При попытке перейти на страницу, не проходящую по ограничениям прав доступа будет вызвана ошибка:
>Page not found (404) - Нет прав доступа

### Валидация полей формы заказа:

- пользователь может выбрать услугу и врача, только в том случае, если врач оказывает такую услугу
- запись начинается только со следующего дня (нельзя выбрать прошедший или текущий день)
- нельзя выбрать время вне времени работы клиники (с 8:00 до 20:00)
- нельзя выбрать дату записи, если в этот день у врача нет приема
- заказ будет успешно создан, только если в выбранный день у врача будет свободное время (длительность любой процедуры по-умолчанию 1 час)

------------------------------------ 